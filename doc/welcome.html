<html><head>
  <title>duppy: dynamic DNS update service</title>
  <style type='text/css'>
    .c {max-width: 50em; margin: 0 auto; font: 14px monospace;}
    table {margin-left: 1em; border: 0; font-size: 12px;}
    td {padding: 0 1em;}
    hr {margin: 2.5em 0 0.5em 0;}
    p, table, pre {margin-left: 1em;}
  </style>
</head><body><div class=c>
  <h1>Dynamic DNS Update Service</h1>
  <p>
    This is a <a href="https://github.com/pagekite/duppy/">duppy</a> server,
    for <a href="https://en.wikipedia.org/wiki/Dynamic_DNS">dynamically
    updating DNS records</a>.
  </p>
  <table><tr>
    <td><a href="#simple">Simple HTTP updates</a></td><td><b>enabled</b></td><td>HTTP GET <a href="/dnsup/v1/simple">/dnsup/v1/simple</a></td>
  </tr><tr>
    <td><a href="#update">HTTP API updates</a></td><td><b>enabled</b><td>HTTP POST <a href="/dnsup/v1/update">/dnsup/v1/update</a></td>
  </tr><tr>
    <td><a href="https://datatracker.ietf.org/doc/html/rfc2136">RFC2136
        updates</a></td><td><b>enabled</b></td><td>DNS on port 8053</td>
  </tr></table>
  <p>
    Check your provider's documentation, or the
    <a href="https://github.com/pagekite/duppy/wiki">the duppy Wiki</a> for
    more information.
  </p>
  <p>
    You will need to obtain an access token / secret key
    from your provider before you can make use of this service.</a>.
  </p>
  <hr>
  <a name="simple"></a><h2>Simple updates:</h2><pre>
    GET https://u:p@127.0.0.2:5380/dnsup/v1/simple?hostname=...&myip=...

The username should be the zone, and the password is the
secret key (auth token). These should be sent using HTTP Basic
authentication.

Both hostname and myip can have multiple (comma separated)
values. IPv4 and IPv6 addresses are both supported. Responses
are appropriate HTTP status codes and a plain/text summary.

Set `duppy.Server.http_simple = False` to disable.</pre><hr><a name="update"></a><h2>HTTP API updates:</h2><pre>
    POST https://127.0.0.2:5380/dnsup/v1/update

The posted data must be JSON, looking something like this:

    {
        "zone": "example.org",
        "key": "+fnQhoAij/FNM0yCANXkKnxZCNIL7XI2yYRJokvTn+U=",
        "updates": [
            {
                "dns_name": "example.org",
                "op": "delete",
                "type": "MX"
            },
            {
                "dns_name": "example.org",
                "op": "add",
                "type": "MX",
                "priority": 10,
                "data": "mail.example.org"
            },
                ...
        ]
    }


Supported ops are `delete` and `add`. The most common record
types (A, AAAA, CNAME, MX, SRV, TXT) are supported. There can be
as many update operations as you need, but all must apply to DNS
names within the same zone.

MX additions require the extra paramter `priority`, SRV requires
`priority`, `weight` and `port`, in addition to the common `data`.

When deleting, adding `type` and `data` can be used to narrow
the scope of the deletion.

The secret key (auth token) can alternately be provided as a
Bearer token in the HTTP Authorization header, or as a
query-string argument named `key`.

Set `duppy.Server.http_updates = False` to disable.</pre>
</div></body></html>